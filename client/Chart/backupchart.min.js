function getAPI(t){}function updateSelection(t,e,n,o,a,s,l){let c="http://localhost:8080/survey/api/general?academic_year="+replaceAny(t)+"&semester="+replaceAny(e)+"&faculty="+replaceAny(n)+"&program="+replaceAny(o)+"&module="+replaceAny(a)+"&lecturer="+replaceAny(l)+"&class="+replaceAny(s);return console.log(c),c}function replaceAny(t){return"--any--"===t?"null":t}function checkSelections(){if(checkSelection("sel-acad")||checkSelection("sel-sem")||checkSelection("sel-faculty")||checkSelection("sel-pro")||checkSelection("sel-module")||checkSelection("sel-class")||checkSelection("sel-lec"))return!0}function checkSelection(t){if("starter"!=$("."+t+" option:selected").val())return!0}function getAcad(){return $(".sel-acad").find(":selected").text()}function getSem(){return $(".sel-sem").find(":selected").text()}function getFaculty(){return $(".sel-faculty").find(":selected").text()}function getPro(){return $(".sel-pro").find(":selected").text()}function getModule(){return $(".sel-module").find(":selected").text()}function getClass(){return $(".sel-class").find(":selected").text()}function getLec(){return $(".sel-lec").find(":selected").text()}function getSelection(){$.ajax({type:"GET",url:"http://localhost:8080/survey/api/general",success:function(t){[...new Set(t.map(t=>t.AYcode))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-acad")});[...new Set(t.map(t=>t.AYcode))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-sem")});[...new Set(t.map(t=>t.Fname))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-faculty")});[...new Set(t.map(t=>t.Pname))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-pro")});[...new Set(t.map(t=>t.Mname))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-module")});[...new Set(t.map(t=>t.Ccode))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-class")});[...new Set(t.map(t=>t.Lname))].map(t=>{$(` \n                <option>${t}</option>       \n            `).appendTo(".sel-lec")})},error:function(){alert("Error loading order")}})}function getTotalQuestion(t){const e=t.toString();$.ajax({type:"GET",url:e,success:function(e){const n=t.split("."),o=JSON.parse(e),a=[],s=[];for(const t in o)a.push(parseInt(o[t])),isNaN(parseInt(t))?s.push(t):s.push(parseInt(t));getForm(s,a,n[0],Freq(o))}})}function Freq(t){const e=[];for(const n in t){const o=parseInt(t[n]);for(let t=0;t<o;t++)e.push(parseInt(n))}return e}function getMean(t,e){const n=t.reduce((t,e)=>t+e);let o=0,a=0;for(let s=0;s<t.length;s++)a=t[s]*e[s]/n,o+=a;return o}function calPercent(t,e){return t.map(t=>Math.round(100*t/e))}function getForm(t,e,n,o){const a=calPercent(e,42),s=Math.round(jStat.mean(o)),l=Math.round(jStat.stdev(o));$(`<div class=${n}></div>\n        <canvas id="${n}">\n        \n        </canvas>\n        <div class="stats">\n            <p>Mean:${s}</p>\n            <p>Sd:${l}</p>\n            <p>size:42</p>\n        </div>\n        `).appendTo(".chart-container"),Chart.pluginService.register({afterDraw:function(t){if(void 0!==t.config.options.lineAt){t.config.options.lineAt;var e=t.chart.ctx,n=t.scales[t.config.options.scales.xAxes[0].id];e.strokeStyle="green",e.beginPath(),100,c.arc(645,315,15,0,2*Math.PI),e.moveTo(n.left,100),e.stroke(),e.closePath(),e.beginPath(),e.fillStyle="black",c.fill(),e.font="30px Arial",e.fillText(s,639,280)}}});var c=document.getElementById(""+n).getContext("2d");new Chart(c,{type:"bar",data:{labels:t,datasets:[{label:n,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:a},{type:"bubble",data:[{x:0,y:0,r:0}],label:"mean",backgroundColor:"rgb(0, 0, 0)"}]},options:{animation:{duration:0},lineAt:15,annotation:{annotations:[{type:"box",xScaleID:"x-axis-0",yScaleID:"y-axis-0",xMin:s-1,xMax:s+1,yMax:50,yMin:50,borderColor:"tomato",borderWidth:1}],drawTime:"afterDraw"},data:a,layout:{padding:{left:0,right:0,top:15,bottom:0}},responsive:!0,scales:{yAxes:[{ticks:{min:0,max:100,beginAtZero:!0}}]},tooltips:{enabled:!1},plugins:{chartJsPluginErrorBars:{width:400},datalabels:{display:!1},labels:{render:function(t){if(!isNaN(t)){return Math.round(t.value)+"%"}}}}}})}function getAttendanceGen(t){const e=t.toString();$.ajax({type:"GET",url:e,success:function(e){const n=t.split("."),o=JSON.parse(e),a=[],s=[];for(const t in o)a.push(parseInt(o[t])),isNaN(parseInt(t))?s.push(t):s.push(parseInt(t));getNewForm(s,a,n[0],Freq(o))}})}function Freq(t){const e=[];for(const n in t){const o=parseInt(t[n]);for(let t=0;t<o;t++)e.push(parseInt(n))}return e}function getMean(t,e){const n=t.reduce((t,e)=>t+e);let o=0,a=0;for(let s=0;s<t.length;s++)a=t[s]*e[s]/n,o+=a;return o}function calPercent(t,e){return t.map(t=>Math.round(100*t/e))}function getNewForm(t,e,n,o){const a=calPercent(e,42);Math.round(jStat.mean(o)),Math.round(jStat.stdev(o));console.log(n),$(`<div class=${n}></div>\n            \n        <canvas id="${n}">\n       \n    </canvas>\n    `).appendTo(".chart-container");var s=document.getElementById(""+n).getContext("2d");new Chart(s,{type:"bar",data:{labels:t,datasets:[{label:n,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:a}]},options:{data:a,layout:{padding:{left:0,right:0,top:15,bottom:0}},responsive:!0,scales:{yAxes:[{ticks:{min:0,max:100,beginAtZero:!0}}]},tooltips:{enabled:!1},plugins:{chartJsPluginErrorBars:{width:400},datalabels:{display:!1},labels:{render:function(t){return Math.round(t.value)+"%"}}}}})}$((function(){getSelection();updateSelection(getAcad(),getSem(),getFaculty(),getPro(),getModule(),getClass(),getLec());$(".visual").click((function(t){})),$(".sel-acad, .sel-sem, .sel-faculty, .sel-pro, .sel-module, .sel-class, .sel-lec").change((function(t){const e=updateSelection(getAcad(),getSem(),getFaculty(),getPro(),getModule(),getClass(),getLec());$(".visual").click((function(t){})),getAPI(e)})),$(".visual").click((function(t){t.preventDefault(),getAttendanceGen("attendance.txt"),getAttendanceGen("gender.txt"),getTotalQuestion("question1.txt"),getTotalQuestion("question2.txt"),getTotalQuestion("question3.txt"),getTotalQuestion("question4.txt"),getTotalQuestion("question5.txt"),getTotalQuestion("question6.txt"),getTotalQuestion("question7.txt"),getTotalQuestion("question8.txt"),getTotalQuestion("question9.txt"),getTotalQuestion("question10.txt"),getTotalQuestion("question11.txt"),getTotalQuestion("question12.txt"),getTotalQuestion("question13.txt"),getTotalQuestion("question14.txt"),getTotalQuestion("question15.txt"),getTotalQuestion("question16.txt"),getTotalQuestion("question17.txt"),getTotalQuestion("question18.txt")}))}));